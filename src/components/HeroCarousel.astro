---
import { Carousel } from 'astro-bootstrap';
import type { CarouselSlideType } from 'astro-bootstrap';
import { carouselImages } from '../data/gallery.js';

const id = 'carouselExampleBasic';

// Map carouselImages to CarouselSlideType
// Add safety check in case carouselImages is undefined
const slides: CarouselSlideType[] = (carouselImages || []).map((img, index) => ({
  img,
  alt: `Carousel image ${index + 1}`,
  active: index === 0,
}));
---

<section class="max-w-4xl mx-auto px-4 py-6">
  {slides.length > 0 ? (
    <Carousel {id} fade interval={3000}>
      <Carousel.Indicators {id} {slides} />
      <Carousel.Inner>
        {slides.map((slide) => (
          <Carousel.Item active={slide.active}>
            <div class="relative w-full pt-[100%]"> 
              <!-- This creates a square container -->
              <img
                src={slide.img}
                alt={slide.alt}
                class="absolute top-0 left-0 w-full h-full object-cover rounded-lg"
              />
            </div>
          </Carousel.Item>
        ))}
      </Carousel.Inner>
      <Carousel.Controls id={id} />
    </Carousel>
  ) : (
    <p class="text-gray-400">No carousel images available.</p>
  )}
</section>