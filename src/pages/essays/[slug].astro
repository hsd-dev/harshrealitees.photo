---
// src/pages/essays/[slug].astro
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import EssayCarousel from '../../components/EssayCarousel.astro';

// Required for dynamic routing
export async function getStaticPaths() {
  const essays = await getCollection('essays');
  return essays.map(essay => ({
    params: { slug: essay.id }, // must match [slug].astro
    props: { essay },
  }));
}

// For individual essay rendering
const { essay } = Astro.props;
---

<BaseLayout title={essay.data.title}>
  <!-- Back button - ABOVE the slide content, aligned with beginning of slide -->
  <a 
    href="/essays"
    id="essay-back-button"
    class="fixed top-[20%] left-[5%] z-[9999] text-white text-2xl hover:opacity-70 transition-opacity cursor-pointer no-underline"
    style="pointer-events: auto !important; z-index: 9999 !important; position: fixed !important; max-width: 1400px; margin-left: 8rem;"
  >
    â† Back
  </a>
  <div class="relative w-full h-full overflow-hidden">
    <EssayCarousel hero={essay.data.hero} slides={essay.data.slides} />
  </div>
</BaseLayout>
