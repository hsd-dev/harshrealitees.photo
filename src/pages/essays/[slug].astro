---
// src/pages/essays/[slug].astro
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import EssayCarousel from '../../components/EssayCarousel.astro';

// Required for dynamic routing
export async function getStaticPaths() {
  const essays = await getCollection('essays');
  return essays.map(essay => ({
    params: { slug: essay.id }, // must match [slug].astro
    props: { essay },
  }));
}

// For individual essay rendering
const { essay } = Astro.props;
---

<BaseLayout title={essay.data.title}>
  <div style="position: relative; width: 100%; height: 100vh; overflow: hidden; margin-top: -6rem;">
    <!-- Back button -->
    <a 
      href="/essays"
      class="absolute top-6 left-6 z-50 text-white text-2xl hover:opacity-70 transition-opacity"
      style="z-index: 50;"
    >
      â† Back
    </a>
    <EssayCarousel hero={essay.data.hero} slides={essay.data.slides} />
  </div>
</BaseLayout>
